<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>승환's 노래 저장소</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .collapsible {
            background-color: #777;
            color: white;
            cursor: pointer;
            padding: 10px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 15px;
        }

        .active, .collapsible:hover {
            background-color: #555;
        }

        .content {
            padding: 0 18px;
            display: none;
            overflow: hidden;
            background-color: #f1f1f1;
        }
    </style>
</head>
<body>
    <header>
        <h1>승환's 노래 저장소</h1>
        <nav>
            <ul>
                <li><a href="index.html">홈</a></li>
                <li><a href="add-song.html">노래 추가</a></li>
            </ul>
        </nav>
        <input type="text" id="searchBar" placeholder="노래 제목 또는 장르 검색...">
    </header>
    <main>
        <section id="songs">
            <h2>장르별 노래 목록</h2>
            <!-- 장르별 노래 목록이 여기 표시됩니다 -->
        </section>
    </main>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const songs = JSON.parse(localStorage.getItem('songs')) || [];
            
            function displaySongs() {
                const songSection = document.getElementById('songs');
                songSection.innerHTML = '';

                const genres = {};

                songs.forEach(song => {
                    if (!genres[song.genre]) {
                        genres[song.genre] = [];
                    }
                    genres[song.genre].push(song);
                });

                for (const genre in genres) {
                    const genreDiv = document.createElement('div');
                    const genreHeader = document.createElement('button');
                    genreHeader.textContent = genre;
                    genreHeader.classList.add('collapsible');
                    genreDiv.appendChild(genreHeader);

                    const genreContent = document.createElement('div');
                    genreContent.classList.add('content');

                    genres[genre].forEach(song => {
                        const songDiv = document.createElement('div');
                        songDiv.classList.add('song');
                        songDiv.innerHTML = `
                            <h4>${song.artist} - ${song.title}</h4>
                            <p>평점: ${'★'.repeat(song.rating) + '☆'.repeat(5 - song.rating)}</p>
                            <p>${song.review}</p>
                            ${song.youtubeLink ? `<p><a href="${song.youtubeLink}" target="_blank">유튜브 링크</a></p>` : ''}
                        `;
                        genreContent.appendChild(songDiv);
                    });

                    genreDiv.appendChild(genreContent);
                    songSection.appendChild(genreDiv);
                }

                const coll = document.getElementsByClassName("collapsible");
                for (let i = 0; i < coll.length; i++) {
                    coll[i].addEventListener("click", function() {
                        this.classList.toggle("active");
                        const content = this.nextElementSibling;
                        if (content.style.display === "block") {
                            content.style.display = "none";
                        } else {
                            content.style.display = "block";
                        }
                    });
                }
            }

            displaySongs();  // 페이지 로드 시 노래 목록을 표시
        });
    </script>
</body>
</html>
